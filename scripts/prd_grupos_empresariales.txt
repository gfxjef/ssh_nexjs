PRODUCT REQUIREMENTS DOCUMENT (PRD)
SISTEMA DE GRUPOS EMPRESARIALES PARA DOCUMENTOS

===================================================================

## RESUMEN EJECUTIVO

### Objetivo
Implementar un sistema de clasificaci√≥n por grupos empresariales para el m√≥dulo de documentos, permitiendo organizar y filtrar documentos seg√∫n la entidad empresarial correspondiente: Kossodo, Kossomet, o Grupo Kossodo.

### Justificaci√≥n
Los documentos del sistema deben estar organizados por grupo empresarial para facilitar la gesti√≥n, b√∫squeda y control de acceso espec√≠fico seg√∫n la estructura organizacional del Grupo Kossodo.

### Alcance
- Modificaci√≥n de la base de datos para incluir clasificaci√≥n por grupos
- Actualizaci√≥n de todos los endpoints APIs para manejar filtros por grupo
- Modificaci√≥n de la interfaz de usuario para incluir selectores y filtros de grupo
- Actualizaci√≥n del sistema de b√∫squeda para incluir filtros por grupo
- Posible implementaci√≥n de permisos espec√≠ficos por grupo

===================================================================

## DEFINICI√ìN DE GRUPOS EMPRESARIALES

### Grupos Disponibles
1. **Kossodo** - Entidad principal
2. **Kossomet** - Subsidiaria/divisi√≥n espec√≠fica  
3. **Grupo Kossodo** - Documentos corporativos generales

### Reglas de Negocio
- Todo documento DEBE tener un grupo asignado
- Los grupos son mutuamente excluyentes (un documento pertenece a un solo grupo)
- Por defecto, se asigna "Grupo Kossodo" si no se especifica
- Los usuarios pueden tener acceso diferenciado por grupo seg√∫n sus permisos

===================================================================

## REQUISITOS T√âCNICOS

### 1. BASE DE DATOS
**Modificaciones requeridas:**
- Agregar columna `grupo` tipo ENUM('kossodo', 'kossomet', 'grupo_kossodo') a tabla `documentos`
- Valor por defecto: 'grupo_kossodo'
- √çndice en la columna para optimizar consultas
- Migraci√≥n de datos existentes

### 2. BACKEND - APIs
**Endpoints a modificar:**
- GET /api/documents - Agregar filtro `grupo` en query parameters
- POST /api/documents - Incluir campo `grupo` en body
- PUT /api/documents/{id} - Permitir actualizaci√≥n del campo `grupo`
- GET /api/search/suggestions - Incluir sugerencias por grupo
- GET /api/search/advanced - Filtros avanzados por grupo

**Nuevos endpoints:**
- GET /api/groups - Listar grupos disponibles con metadatos
- GET /api/documents/stats/by-group - Estad√≠sticas por grupo

### 3. FRONTEND - COMPONENTES
**Componentes a modificar:**
- DocumentCard: Mostrar badge del grupo
- AdvancedSearchBar: Filtro de selecci√≥n de grupos
- DocumentUploader: Selector de grupo obligatorio
- CategoryFilter: Posible filtrado combinado grupo+categor√≠a
- DocumentManager: Columna de grupo en vistas de lista

**Nuevos componentes:**
- GroupSelector: Componente reutilizable para selecci√≥n de grupos
- GroupBadge: Badge visual para mostrar el grupo del documento
- GroupFilter: Filtro espec√≠fico de grupos con contadores

### 4. SISTEMA DE PERMISOS
**Consideraciones:**
- Evaluar si se requieren permisos espec√≠ficos por grupo
- Usuarios podr√≠an tener acceso limitado a ciertos grupos
- Administradores de grupo vs administradores globales

### 5. B√öSQUEDA Y FILTRADO
**Funcionalidades:**
- B√∫squeda combinada: texto + categor√≠a + etiquetas + grupo
- Autocompletado que incluya contexto de grupo
- Filtros r√°pidos por grupo en sidebar o header
- Ordenamiento por grupo en resultados

===================================================================

## EXPERIENCIA DE USUARIO

### Flujo de Subida de Documentos
1. Usuario selecciona archivo
2. Completa metadatos (t√≠tulo, descripci√≥n, categor√≠a)
3. **NUEVO:** Selecciona grupo empresarial (dropdown obligatorio)
4. Asigna etiquetas opcionales
5. Confirma subida

### Flujo de B√∫squeda/Visualizaci√≥n
1. Usuario accede a documentos
2. Ve filtros: Categor√≠as, Etiquetas, **NUEVO: Grupos**
3. Puede filtrar por uno o m√∫ltiples grupos
4. Documentos se muestran con badge de grupo visible
5. B√∫squeda avanzada incluye selector de grupos

### Interfaz Visual
- **Colores por grupo:**
  - Kossodo: Azul (#2563EB)
  - Kossomet: Verde (#059669) 
  - Grupo Kossodo: Gris corporativo (#6B7280)
- **Iconos:**
  - Kossodo: üè¢
  - Kossomet: üè≠
  - Grupo Kossodo: üèõÔ∏è

===================================================================

## CASOS DE USO ESPEC√çFICOS

### Caso 1: Administrador subiendo documento de Kossomet
- Selecciona archivo de procedimientos
- Especifica grupo "Kossomet"
- Categor√≠a "Operaciones"
- El documento es visible solo para usuarios con acceso a Kossomet

### Caso 2: Usuario buscando documentos de Kossodo
- Aplica filtro de grupo "Kossodo"
- Ve solo documentos relevantes a esa entidad
- Puede combinar con filtros de categor√≠a

### Caso 3: Reporte general del Grupo
- Administrador busca documentos de "Grupo Kossodo"
- Ve pol√≠ticas generales que aplican a todas las entidades
- Genera reporte consolidado

===================================================================

## CONSIDERACIONES T√âCNICAS

### Migraci√≥n de Datos
- Script para asignar grupo por defecto a documentos existentes
- Posible asignaci√≥n inteligente basada en categor√≠as actuales
- Validaci√≥n de integridad de datos post-migraci√≥n

### Rendimiento
- √çndices optimizados para consultas por grupo
- Cache de contadores por grupo
- Paginaci√≥n eficiente con filtros combinados

### Compatibilidad
- Mantener APIs existentes funcionando
- Par√°metro grupo opcional inicialmente para retrocompatibilidad
- Versionado de API si es necesario

===================================================================

## CRITERIOS DE ACEPTACI√ìN

### Backend
- [ ] Columna grupo agregada a base de datos
- [ ] Todos los endpoints manejan filtros por grupo
- [ ] Migraci√≥n de datos existentes completada
- [ ] Tests unitarios actualizados

### Frontend  
- [ ] Selector de grupo en formulario de subida
- [ ] Filtros por grupo en b√∫squeda avanzada
- [ ] Badges de grupo en tarjetas de documentos
- [ ] Estad√≠sticas por grupo en dashboard

### Integraci√≥n
- [ ] B√∫squeda combinada funciona correctamente
- [ ] Permisos por grupo implementados (si aplicable)
- [ ] Rendimiento optimizado para consultas por grupo
- [ ] Documentaci√≥n actualizada

===================================================================

## CRONOGRAMA ESTIMADO
- An√°lisis detallado y dise√±o: 0.5 d√≠as
- Modificaciones de base de datos: 0.5 d√≠as  
- Actualizaci√≥n de backend/APIs: 1 d√≠a
- Modificaci√≥n de componentes frontend: 1 d√≠a
- Integraci√≥n y testing: 0.5 d√≠as
- **Total estimado: 3.5 d√≠as**

===================================================================

PRIORIDAD: ALTA
COMPLEJIDAD: MEDIA-ALTA
IMPACTO: ALTO (Afecta todo el sistema de documentos) 